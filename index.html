<!DOCTYPE html>
<html>
<head>
<!-- Author: https://gibrain.wordpress.com-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<style>
    .btn {
        white-space: normal;
        font-size: fit-content;
    }

    .progress-bar-custom {
      background: linear-gradient(to right, #b8e994, #2ecc71);
</style>

</head>
<body>
    <div class="container mt-5">
        <div class="progress mb-3">
            <!--<div id="progress-bar" class="progress-bar bg-success" style="width: 0%"></div>-->

    <div id="progress-bar" class="progress-bar progress-bar-striped progress-bar-animated progress-bar-custom" role="progressbar" style="width: 6.67%;" aria-valuenow="6.67" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <div id="labels" class="d-flex justify-content-between mb-3">
            <!-- Labels will be added here -->
        </div>
        <div id="question" class="mb-3 font-weight-bold"></div>
        <div id="options" class="row fixed-bottom pb-3 bg-white">
            <!-- Options will be added here -->
        </div>
    </div>
    <script>
        // Add labels below the progress bar
        for (let i = 1; i <= 15; i++) {
            $('#labels').append('<span>' + i + '</span>');
        }

        // Load the JSON data when the document is ready
        $(document).ready(function() {
            $.getJSON('dufan.json', function(data) {
                let questionIndex = 0;
                let questions = data.games[0].questions;

                function loadQuestion() {
                    let question = questions[questionIndex];
                    $('#question').text(question.question);
                    $('#options').empty();
                    for (let i = 0; i < question.content.length; i++) {

            
                        btn = `<div class="col-6"><button class="btn btn-primary btn-block mb-2"></button></div>`
                        var option = $(btn)

                        $(".btn", option).text(question.content[i]);

                        option.click(function() {
                            if (i === question.correct) {
                                moveProgressBar();
                                questionIndex++;
                                if (questionIndex < questions.length) {
                                    loadQuestion();
                                }
                            }
                        });
                        $('#options').append(option);
                    }
                }

                loadQuestion();
            });
        });

        // Move the progress bar when a button is clicked
        function moveProgressBar() {
            let progressBar = $('#progress-bar');
            let width = progressBar.width();
            let parentWidth = progressBar.parent().width();
            let percent = (width / parentWidth) * 100;

            // Increase the progress by 6.67% (100% divided by 15 steps)
            percent += 6.67;
            progressBar.css('width', percent + '%');

        }
    </script>
</body>
</html>
